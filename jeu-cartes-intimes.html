<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸƒ Jeu des Positions</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700&display=swap');

  :root {
    --pink: #FF6B9D;
    --purple: #C77DFF;
    --orange: #FF9A3C;
    --yellow: #FFD93D;
    --red: #FF4757;
    --bg: #1a0a2e;
    --card-bg: #ffffff;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Nunito', sans-serif;
    background: var(--bg);
    min-height: 100vh;
    overflow-x: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Stars background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background: 
      radial-gradient(ellipse at 20% 20%, rgba(199,125,255,0.15) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, rgba(255,107,157,0.15) 0%, transparent 50%);
    pointer-events: none;
  }

  header {
    text-align: center;
    padding: 2.5rem 1rem 1rem;
    z-index: 1;
  }

  header h1 {
    font-family: 'Fredoka One', cursive;
    font-size: clamp(2rem, 6vw, 3.5rem);
    background: linear-gradient(135deg, var(--pink), var(--purple), var(--orange));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    letter-spacing: 1px;
  }

  header p {
    color: rgba(255,255,255,0.6);
    font-size: 1rem;
    margin-top: 0.4rem;
  }

  /* Stats bar */
  .stats {
    display: flex;
    gap: 1.5rem;
    margin: 1rem 0;
    z-index: 1;
  }

  .stat {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 50px;
    padding: 0.4rem 1.2rem;
    color: white;
    font-size: 0.85rem;
    font-weight: 700;
  }

  .stat span { color: var(--yellow); }

  /* Main game area */
  .game {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    padding: 1rem;
    z-index: 1;
    width: 100%;
    max-width: 480px;
  }

  /* Card */
  .card-wrapper {
    perspective: 1000px;
    width: 320px;
    height: 460px;
    cursor: pointer;
  }

  .card {
    width: 100%;
    height: 100%;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 24px;
    filter: drop-shadow(0 20px 40px rgba(0,0,0,0.5));
  }

  .card.flipped { transform: rotateY(180deg); }

  .card-face {
    position: absolute;
    inset: 0;
    border-radius: 24px;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    overflow: hidden;
  }

  /* Card Back */
  .card-back {
    background: linear-gradient(135deg, #2d1b69, #11998e);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    border: 3px solid rgba(255,255,255,0.15);
  }

  .card-back .big-emoji {
    font-size: 6rem;
    animation: pulse 2s ease-in-out infinite;
  }

  .card-back .hint {
    font-family: 'Fredoka One', cursive;
    font-size: 1.4rem;
    color: white;
    text-align: center;
  }

  .card-back .sub {
    font-size: 0.85rem;
    color: rgba(255,255,255,0.5);
  }

  /* Decorative pattern on back */
  .card-back::before {
    content: 'ğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨';
    position: absolute;
    top: 10px;
    left: 0; right: 0;
    font-size: 0.9rem;
    text-align: center;
    opacity: 0.3;
    letter-spacing: 4px;
  }

  .card-back::after {
    content: 'ğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨ğŸŒŸğŸ’«âœ¨';
    position: absolute;
    bottom: 10px;
    left: 0; right: 0;
    font-size: 0.9rem;
    text-align: center;
    opacity: 0.3;
    letter-spacing: 4px;
  }

  /* Card Front */
  .card-front {
    transform: rotateY(180deg);
    display: flex;
    flex-direction: column;
    border: 3px solid rgba(255,255,255,0.2);
  }

  .card-header {
    padding: 1.2rem 1.4rem 0.8rem;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
  }

  .card-number {
    font-family: 'Fredoka One', cursive;
    font-size: 1.1rem;
    color: rgba(255,255,255,0.7);
  }

  .card-difficulty {
    display: flex;
    gap: 3px;
    font-size: 0.85rem;
  }

  .card-emoji-zone {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 7rem;
    position: relative;
  }

  .card-emoji-zone .position-emoji {
    filter: drop-shadow(0 4px 12px rgba(0,0,0,0.3));
    animation: float 3s ease-in-out infinite;
  }

  .card-body {
    padding: 0.8rem 1.4rem 1.4rem;
  }

  .card-name {
    font-family: 'Fredoka One', cursive;
    font-size: 1.6rem;
    color: white;
    margin-bottom: 0.4rem;
  }

  .card-desc {
    font-size: 0.88rem;
    color: rgba(255,255,255,0.8);
    line-height: 1.5;
    font-style: italic;
  }

  .card-tip {
    margin-top: 0.6rem;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    padding: 0.5rem 0.8rem;
    font-size: 0.8rem;
    color: rgba(255,255,255,0.7);
  }

  .card-tip::before { content: 'ğŸ’¡ '; }

  /* Color themes per card */
  .theme-rose .card-front { background: linear-gradient(160deg, #e91e8c, #ff6b9d); }
  .theme-purple .card-front { background: linear-gradient(160deg, #7b2ff7, #c77dff); }
  .theme-fire .card-front { background: linear-gradient(160deg, #f7931e, #ff4757); }
  .theme-ocean .card-front { background: linear-gradient(160deg, #0099f7, #11998e); }
  .theme-night .card-front { background: linear-gradient(160deg, #2c3e50, #4a1942); }

  /* Buttons */
  .controls {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    justify-content: center;
  }

  .btn {
    font-family: 'Fredoka One', cursive;
    font-size: 1.1rem;
    padding: 0.8rem 2rem;
    border: none;
    border-radius: 50px;
    cursor: pointer;
    transition: all 0.2s;
    letter-spacing: 0.5px;
  }

  .btn:hover { transform: translateY(-3px) scale(1.05); }
  .btn:active { transform: translateY(0) scale(0.97); }

  .btn-main {
    background: linear-gradient(135deg, var(--pink), var(--purple));
    color: white;
    box-shadow: 0 8px 24px rgba(255,107,157,0.4);
  }

  .btn-secondary {
    background: rgba(255,255,255,0.1);
    color: white;
    border: 2px solid rgba(255,255,255,0.2);
  }

  /* Progress */
  .progress-bar {
    width: 320px;
    height: 6px;
    background: rgba(255,255,255,0.1);
    border-radius: 10px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--pink), var(--purple));
    border-radius: 10px;
    transition: width 0.5s ease;
  }

  .progress-text {
    color: rgba(255,255,255,0.4);
    font-size: 0.8rem;
    text-align: center;
    margin-top: 0.4rem;
  }

  /* Celebration */
  .celebration {
    position: fixed;
    inset: 0;
    background: rgba(26,10,46,0.95);
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 100;
    gap: 1.5rem;
    text-align: center;
    padding: 2rem;
  }

  .celebration.show { display: flex; }

  .celebration .big { font-size: 5rem; }

  .celebration h2 {
    font-family: 'Fredoka One', cursive;
    font-size: 2rem;
    background: linear-gradient(135deg, var(--pink), var(--yellow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .celebration p { color: rgba(255,255,255,0.7); max-width: 300px; }

  /* Mode selector */
  .mode-selector {
    display: flex;
    gap: 0.6rem;
    margin-bottom: 0.5rem;
  }

  .mode-btn {
    font-family: 'Fredoka One', cursive;
    font-size: 0.85rem;
    padding: 0.4rem 1rem;
    border-radius: 30px;
    border: 2px solid rgba(255,255,255,0.2);
    background: transparent;
    color: rgba(255,255,255,0.5);
    cursor: pointer;
    transition: all 0.2s;
  }

  .mode-btn.active {
    background: var(--pink);
    border-color: var(--pink);
    color: white;
  }

  /* Animations */
  @keyframes pulse { 0%,100% { transform: scale(1); } 50% { transform: scale(1.08); } }
  @keyframes float { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
  @keyframes slideIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes spin { to { transform: rotate(360deg); } }

  .card-wrapper { animation: slideIn 0.5s ease both; }

  .confetti-piece {
    position: fixed;
    width: 10px;
    height: 10px;
    border-radius: 2px;
    animation: fall linear forwards;
    pointer-events: none;
  }

  @keyframes fall {
    0% { transform: translateY(-20px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
  }
</style>
</head>
<body>

<header>
  <h1>ğŸƒ Jeu des Positions</h1>
  <p>Piochez une carte et laissez la magie opÃ©rer âœ¨</p>
</header>

<div class="stats">
  <div class="stat">Cartes vues : <span id="seen-count">0</span>/30</div>
  <div class="stat">ğŸ”¥ <span id="streak">0</span> d'affilÃ©e</div>
</div>

<div class="game">

  <div class="mode-selector">
    <button class="mode-btn active" onclick="setMode('normal')">Normal</button>
    <button class="mode-btn" onclick="setMode('challenge')">Challenge ğŸ²</button>
    <button class="mode-btn" onclick="setMode('duel')">Duel ğŸ‘¥</button>
  </div>

  <div class="progress-bar">
    <div class="progress-fill" id="progress" style="width:0%"></div>
  </div>
  <div class="progress-text" id="progress-text">0 / 30 cartes explorÃ©es</div>

  <div class="card-wrapper" id="card-wrapper">
    <div class="card" id="card">
      <!-- Back -->
      <div class="card-face card-back">
        <div class="big-emoji">ğŸƒ</div>
        <div class="hint">Appuyez pour rÃ©vÃ©ler</div>
        <div class="sub">30 positions vous attendent</div>
      </div>
      <!-- Front -->
      <div class="card-face card-front"></div>
    </div>
  </div>

  <div id="mode-label" style="color:rgba(255,255,255,0.5);font-size:0.85rem;text-align:center;min-height:1.5rem;"></div>

  <div class="controls">
    <button class="btn btn-secondary" id="flip-btn" onclick="flipCard()">ğŸ‘€ RÃ©vÃ©ler</button>
    <button class="btn btn-main" id="next-btn" onclick="nextCard()" disabled>Suivante â¡ï¸</button>
  </div>

</div>

<!-- Celebration overlay -->
<div class="celebration" id="celebration">
  <div class="big">ğŸ†</div>
  <h2>Bravo les champions !</h2>
  <p>Vous avez explorÃ© toutes les 30 positions. On espÃ¨re que vous avez pris des notes... ou des photos ğŸ˜</p>
  <button class="btn btn-main" onclick="resetGame()">ğŸ”„ Recommencer</button>
</div>

<script>
const cards = [
  { name: "Le Missionnaire Classique", emoji: "ğŸŒ¹", desc: "La valeur sÃ»re qui ne vieillit jamais â€” comme le bon vin et les croissants du dimanche.", tip: "Parfait pour dÃ©marrer la soirÃ©e en douceur.", diff: "â­", theme: "theme-rose" },
  { name: "La CuillÃ¨re Cosmique", emoji: "ğŸ¥„", desc: "NichÃ©s l'un contre l'autre comme deux galaxies en fusion douce et langoureuse.", tip: "IdÃ©al pour une nuit d'hiver aprÃ¨s un film romantique.", diff: "â­", theme: "theme-night" },
  { name: "Le Cavalier de l'Aurore", emoji: "ğŸ¦„", desc: "Elle s'Ã©lÃ¨ve, majestueuxÂ·se comme une licorne au lever du soleil. Le trÃ´ne vous appartient.", tip: "Qui contrÃ´le le rythme contrÃ´le le destin.", diff: "â­â­", theme: "theme-purple" },
  { name: "La Barque sur le Nil", emoji: "ğŸ›¶", desc: "CÃ´te Ã  cÃ´te, portÃ©s par le mÃªme courant mystÃ©rieux â€” navigation intime vers l'infini.", tip: "Une main libre pour des caresses supplÃ©mentaires.", diff: "â­", theme: "theme-ocean" },
  { name: "L'Amazone Volante", emoji: "ğŸ¹", desc: "TelÂ·le un archerÂ·Ã¨re en plein vol, elle vise le bonheur mutuel avec une prÃ©cision redoutable.", tip: "Regardez-vous dans les yeux pour dÃ©cupler l'intensitÃ©.", diff: "â­â­â­", theme: "theme-fire" },
  { name: "Le Lotus en Fleur", emoji: "ğŸª·", desc: "Deux Ã¢mes emmÃªlÃ©es comme des pÃ©tales, dans une mÃ©ditation qui s'embrase doucement.", tip: "Respirez ensemble pour synchroniser vos souffles.", diff: "â­â­", theme: "theme-rose" },
  { name: "Le Plongeur des Profondeurs", emoji: "ğŸŒŠ", desc: "Une plongÃ©e vers des abysses de plaisir oÃ¹ la pression monte... agrÃ©ablement.", tip: "Un coussin sous les hanches change tout.", diff: "â­â­", theme: "theme-ocean" },
  { name: "La Chaise Longue Royale", emoji: "ğŸ‘‘", desc: "AssisÂ·e sur le trÃ´ne du dÃ©sir, majestueuxÂ·se et souverainÂ·e â€” l'empire est Ã  vous.", tip: "Trouvez le bon angle et rÃ©gnez.", diff: "â­â­â­", theme: "theme-purple" },
  { name: "Le Coquelicot au Vent", emoji: "ğŸŒº", desc: "Souple et ondulant comme une fleur dans la brise estivale, laissez le vent vous porter.", tip: "Lenteur et fluiditÃ© sont vos meilleurs alliÃ©s.", diff: "â­", theme: "theme-rose" },
  { name: "Le Papillon Acrobate", emoji: "ğŸ¦‹", desc: "Les ailes dÃ©ployÃ©es, libÃ©rÃ©Â·e de toute gravitÃ© â€” un envol vers des contrÃ©es inexplorÃ©es.", tip: "FlexibilitÃ© requise... ou un peu de yoga prÃ©alable !", diff: "â­â­â­", theme: "theme-purple" },
  { name: "La Tour de Babel", emoji: "ğŸ—¼", desc: "Debout, fiers et vertigineux â€” une construction ambitieuse qui dÃ©fie les hauteurs.", tip: "Un mur pour s'appuyer, un atout indÃ©niable.", diff: "â­â­", theme: "theme-night" },
  { name: "Le Sphinx MystÃ©rieux", emoji: "ğŸ¦", desc: "AllongÃ©Â·e, Ã©nigmatique, gardienÂ·ne de secrets brÃ»lants â€” rÃ©solvez le mystÃ¨re ensemble.", tip: "L'angle arriÃ¨re crÃ©e des sensations uniques.", diff: "â­â­", theme: "theme-fire" },
  { name: "La Pieuvre Gracieuse", emoji: "ğŸ™", desc: "Huit bras imaginaires s'entrelacent dans une danse marine de curiositÃ© et de tendresse.", tip: "Les mains sont partout â€” profitez-en !", diff: "â­â­", theme: "theme-ocean" },
  { name: "Le Phoenix Renaissant", emoji: "ğŸ”¥", desc: "Des cendres surgit une flamme nouvelle â€” puissante, ardente, transformatrice et inoubliable.", tip: "RÃ©servez cette carte pour les grands soirs.", diff: "â­â­â­", theme: "theme-fire" },
  { name: "La BalanÃ§oire EnchantÃ©e", emoji: "ğŸ ", desc: "Suspendus entre ciel et terre, balancÃ©s par un rythme doux et hypnotique comme une mÃ©lodie.", tip: "Synchronisez-vous pour un rÃ©sultat magique.", diff: "â­â­", theme: "theme-purple" },
  { name: "Le Dauphin Joueur", emoji: "ğŸ¬", desc: "EspiÃ¨gle et vif, il plonge et surgit avec une joie communicative et contagieuse.", tip: "L'eau et les dauphins font bon mÃ©nage â€” indice ğŸ˜‰", diff: "â­â­", theme: "theme-ocean" },
  { name: "La Liane de Jungle", emoji: "ğŸŒ¿", desc: "EnroulÃ©Â·eÂ·s l'unÂ·e Ã  l'autre comme deux lianes, la jungle de vos sens s'Ã©veille lentement.", tip: "Jambes entrelacÃ©es pour une intimitÃ© maximale.", diff: "â­", theme: "theme-night" },
  { name: "Le Pirate et le TrÃ©sor", emoji: "ğŸ´â€â˜ ï¸", desc: "Une carte au trÃ©sor dans les mains, deux pirates en quÃªte de l'Ã®le mystÃ©rieuse du plaisir.", tip: "Improvisation et surprise sont les rÃ¨gles du jeu.", diff: "â­â­", theme: "theme-night" },
  { name: "L'Alpiniste Courageux", emoji: "â›°ï¸", desc: "On grimpe ensemble vers le sommet â€” l'altitude et l'effort font partie de l'aventure Ã©pique.", tip: "Prenez votre temps, le sommet est au bout.", diff: "â­â­â­", theme: "theme-fire" },
  { name: "La SirÃ¨ne Ensorcelante", emoji: "ğŸ§œâ€â™€ï¸", desc: "Mi-rÃªve mi-rÃ©alitÃ©, elle envoÃ»te avec sa queue d'Ã©cailles et ses chants de fond des mers.", tip: "La position de cÃ´tÃ© libÃ¨re bien des possibilitÃ©s.", diff: "â­â­", theme: "theme-ocean" },
  { name: "Le Funambule Ã‰toilÃ©", emoji: "ğŸŒŸ", desc: "Ã‰quilibre parfait sur le fil du plaisir â€” ni trop vite, ni trop lentement, juste l'exact.", tip: "La communication est votre filet de sÃ©curitÃ©.", diff: "â­â­â­", theme: "theme-purple" },
  { name: "L'Ours et le Miel", emoji: "ğŸ»", desc: "GourmandÂ·e et douxÂ·ce Ã  la fois, il savoure chaque instant de cette douce dÃ©couverte sucrÃ©e.", tip: "Douceur et patience sont les clÃ©s de voÃ»te.", diff: "â­", theme: "theme-fire" },
  { name: "Le Cerf-volant Libre", emoji: "ğŸª", desc: "Un fil invisible vous relie au sol tandis que vous planez dans les hauteurs cÃ©lestes ensemble.", tip: "Respirez librement et lÃ¢chez prise totalement.", diff: "â­â­", theme: "theme-ocean" },
  { name: "La Valse des Cigognes", emoji: "ğŸ¦¢", desc: "Gracieux et majestueux, ce ballet intime se danse en regardant vers le mÃªme horizon dorÃ©.", tip: "La lenteur de la valse, Ã§a se mÃ©rite.", diff: "â­â­", theme: "theme-rose" },
  { name: "Le DÃ©tective en Planque", emoji: "ğŸ•µï¸", desc: "CachÃ©Â·e dans l'ombre de votre dÃ©sir, vous observez, anticipez... et frappez au bon moment.", tip: "L'effet de surprise vaut de l'or.", diff: "â­â­â­", theme: "theme-night" },
  { name: "Le Volcan Endormi", emoji: "ğŸŒ‹", desc: "Calme en surface... jusqu'Ã  ce que la lave monte et que tout explose magnifiquement.", tip: "Commencez tout doucement. La montÃ©e est la meilleure partie.", diff: "â­â­", theme: "theme-fire" },
  { name: "La Constellation Perdue", emoji: "âœ¨", desc: "Deux Ã©toiles qui se cherchaient et se trouvent enfin â€” leur lumiÃ¨re combinÃ©e illumine la nuit.", tip: "Prenez le temps de vous redÃ©couvrir.", diff: "â­", theme: "theme-night" },
  { name: "Le Tango Argentin", emoji: "ğŸ’ƒ", desc: "Tension, passion, regard d'acier â€” ce n'est pas une danse, c'est une dÃ©claration de dÃ©sir.", tip: "Laissez-vous guider l'un par l'autre tour Ã  tour.", diff: "â­â­â­", theme: "theme-rose" },
  { name: "Le Yogi Ã‰panoui", emoji: "ğŸ§˜", desc: "FlexibilitÃ© du corps, ouverture de l'esprit â€” la position du plaisir ultime est une posture spirituelle.", tip: "Quelques Ã©tirements avant... et aprÃ¨s !", diff: "â­â­â­", theme: "theme-purple" },
  { name: "Le Grand Final", emoji: "ğŸ†", desc: "Le feu d'artifice de toutes les cartes rÃ©unies â€” improvisation totale, tout est permis, tout est beau.", tip: "Pas de rÃ¨gles. Juste vous deux. Bonne chance ğŸ˜ˆ", diff: "â­â­â­", theme: "theme-fire" },
];

let currentIndex = -1;
let seen = new Set();
let isFlipped = false;
let mode = 'normal';
let streak = 0;
let order = [];

function shuffle(arr) {
  const a = [...arr];
  for (let i = a.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

function setMode(m) {
  mode = m;
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  const labels = {
    normal: '',
    challenge: 'ğŸ² Mode Challenge : essayez la position avant de passer Ã  la suivante !',
    duel: 'ğŸ‘¥ Mode Duel : Ã  tour de rÃ´le, c\'est l\'autre qui pioche !'
  };
  document.getElementById('mode-label').textContent = labels[m];
}

function renderCard(card, index) {
  const front = document.querySelector('.card-front');
  front.className = `card-face card-front ${card.theme}`;
  front.innerHTML = `
    <div class="card-header">
      <div class="card-number">#${String(index + 1).padStart(2,'0')}</div>
      <div class="card-difficulty">${card.diff}</div>
    </div>
    <div class="card-emoji-zone">
      <span class="position-emoji">${card.emoji}</span>
    </div>
    <div class="card-body">
      <div class="card-name">${card.name}</div>
      <div class="card-desc">${card.desc}</div>
      <div class="card-tip">${card.tip}</div>
    </div>
  `;
}

function flipCard() {
  if (!isFlipped && currentIndex >= 0) {
    document.getElementById('card').classList.add('flipped');
    isFlipped = true;
    document.getElementById('flip-btn').textContent = 'ğŸ™ˆ Cacher';
    document.getElementById('next-btn').disabled = false;
  } else if (isFlipped) {
    document.getElementById('card').classList.remove('flipped');
    isFlipped = false;
    document.getElementById('flip-btn').textContent = 'ğŸ‘€ RÃ©vÃ©ler';
  }
}

function nextCard() {
  if (seen.size >= 30) {
    document.getElementById('celebration').classList.add('show');
    launchConfetti();
    return;
  }

  // Reset flip
  document.getElementById('card').classList.remove('flipped');
  isFlipped = false;
  document.getElementById('flip-btn').textContent = 'ğŸ‘€ RÃ©vÃ©ler';
  document.getElementById('next-btn').disabled = true;

  // Pick next
  if (order.length === 0) order = shuffle([...Array(30).keys()]);
  do { currentIndex = order.shift(); } while (seen.has(currentIndex) && order.length > 0);
  seen.add(currentIndex);
  streak++;

  renderCard(cards[currentIndex], currentIndex);

  // Animate card entrance
  const wrapper = document.getElementById('card-wrapper');
  wrapper.style.animation = 'none';
  void wrapper.offsetHeight;
  wrapper.style.animation = 'slideIn 0.4s ease both';

  // Update stats
  document.getElementById('seen-count').textContent = seen.size;
  document.getElementById('streak').textContent = streak;
  document.getElementById('progress').style.width = (seen.size / 30 * 100) + '%';
  document.getElementById('progress-text').textContent = `${seen.size} / 30 cartes explorÃ©es`;

  if (seen.size >= 30) {
    document.getElementById('next-btn').textContent = 'ğŸ‰ Terminer';
  }
}

function resetGame() {
  seen.clear();
  streak = 0;
  currentIndex = -1;
  isFlipped = false;
  order = [];
  document.getElementById('celebration').classList.remove('show');
  document.getElementById('card').classList.remove('flipped');
  document.getElementById('seen-count').textContent = '0';
  document.getElementById('streak').textContent = '0';
  document.getElementById('progress').style.width = '0%';
  document.getElementById('progress-text').textContent = '0 / 30 cartes explorÃ©es';
  document.getElementById('next-btn').disabled = true;
  document.getElementById('next-btn').textContent = 'Suivante â¡ï¸';
  document.getElementById('flip-btn').textContent = 'ğŸ‘€ RÃ©vÃ©ler';

  // Reset card back to start state
  const back = document.querySelector('.card-back');
  back.querySelector('.hint').textContent = 'Appuyez pour rÃ©vÃ©ler';
}

function launchConfetti() {
  const colors = ['#FF6B9D','#C77DFF','#FFD93D','#FF9A3C','#11998e'];
  for (let i = 0; i < 60; i++) {
    setTimeout(() => {
      const el = document.createElement('div');
      el.className = 'confetti-piece';
      el.style.left = Math.random() * 100 + 'vw';
      el.style.background = colors[Math.floor(Math.random() * colors.length)];
      el.style.animationDuration = (Math.random() * 2 + 1.5) + 's';
      el.style.animationDelay = Math.random() * 0.5 + 's';
      el.style.transform = `rotate(${Math.random() * 360}deg)`;
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 3000);
    }, i * 30);
  }
}

// Start: show first card back, enable "RÃ©vÃ©ler" only after next
// Actually start by picking the first card immediately but not showing it
nextCard();
document.getElementById('card').classList.remove('flipped');
isFlipped = false;
document.getElementById('flip-btn').textContent = 'ğŸ‘€ RÃ©vÃ©ler';
document.getElementById('next-btn').disabled = true;
// Reset but keep card ready
</script>
</body>
</html>
